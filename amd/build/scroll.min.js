define(["jquery","core/log"],function(a,b){"use strict";return b.debug("Shoelace Scroll AMD."),function(a){a.fn.shoelaceScroll=function(c){var d=a.extend({},a.fn.shoelaceScroll.defaults,c);d.elementHeight=d.theElement.height()+1;var e=0,f=0,g=0,h=!0,i=!1,j=!1,k=a(this).scrollTop(),l=k;b.debug("shoelaceScroll - Element height + 1 : "+d.elementHeight),b.debug("shoelaceScroll - Scroll up amount   : "+d.scrollupamount),b.debug("shoelaceScroll - Current scroll pos : "+k);var m=function(){j?(g+=f,g>d.elementHeight?(g=d.elementHeight,i=!0,h=!1,b.debug("SET: Element fully hidden.")):(h=!1,i=!1,b.debug("SET: Element partial (down)."))):(g-=f,g<0?(g=0,h=!0,i=!1,b.debug("SET: Element fully shown.")):(h=!1,i=!1,b.debug("SET: Element partial (up)."))),d.theElement.css("top","-"+g+"px")};return this.on("mouseup",function(a){b.debug("SC: MUP - tally reset."),e=0}),this.on("touchend",function(a){b.debug("SC: TEND - tally reset."),e=0}),this.on("keyup",function(a){b.debug("KEYC "+a.which),38!=a.which&&40!=a.which||a.target==document.body&&(b.debug("KEYC 'isBody' with up/down cursor key - tally reset."),e=0)}),this.on("resize",function(a){b.debug("SC: RESZ - tally reset."),e=0}),this.scroll(function(c){l=a(this).scrollTop(),b.debug("SCTop: "+l),l>k?(j||(b.debug("SC was up now down - reset tally."),e=0),j=!0,f=l-k,e+=f,i||m()):(j&&(b.debug("SC was down now up - reset tally."),e=0),j=!1,f=k-l,e+=f,(e>=d.scrollupamount||l<=d.elementHeight)&&(h||m())),b.debug("SCDiff: "+f),b.debug("SCTally: "+e),k=l}),k>0&&(j=!0,f=k,m()),this},a.fn.shoelaceScroll.defaults={scrollupamount:250}}(a),{init:function(c){b.debug("Shoelace Scroll AMD init."),a(document).ready(function(a){a(window).shoelaceScroll({theElement:a(".navbar"),scrollupamount:c.navbarscrollupamount})})}}});